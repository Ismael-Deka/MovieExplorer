{"ast":null,"code":"import _slicedToArray from\"/root/hw-milestone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from\"../css/CommentForm.module.css\";import SumbitButton from\"../../ui/js/SumbitButton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CommentForm(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),comment_text=_useState2[0],setCommentText=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];function setComment(text){setCommentText(text.target.value);}function postComment(){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({comment:comment_text,rating:rating})};fetch(\"/post/\"+props.movie_id+\"/\"+props.user+\"\",requestOptions).then(function(reponse){return reponse.json().then(function(data){if(data.user==\"\"){setDialogMessage([\"User not found. Please \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Sign Up!\"})]);showCloseHandler();}else{navigate(\"/movie\");}});});}return/*#__PURE__*/_jsxs(\"div\",{className:classes.commentform,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.commentlogo,children:\"Create a New Comment\"}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",style:{resize:'none'},className:classes.commentbox,onChange:setComment,onKeyPress:function onKeyPress(event){if(event.key=='Enter'&&userNameText!==\"\"){postComment();}}})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.commentoptions,type:\"submit\",onChange:setRating,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Movie ID: \",props.movie_id]}),/*#__PURE__*/_jsx(\"div\",{children:\"Rating (out of 5)\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"rating\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"})]}),/*#__PURE__*/_jsx(SumbitButton,{})]})]});}export default CommentForm;","map":{"version":3,"sources":["/root/hw-milestone/src/components/comments/js/CommentForm.js"],"names":["classes","SumbitButton","CommentForm","props","useState","comment_text","setCommentText","rating","setRating","setComment","text","target","value","postComment","requestOptions","method","headers","body","JSON","stringify","comment","fetch","movie_id","user","then","reponse","json","data","setDialogMessage","showCloseHandler","navigate","commentform","commentlogo","resize","commentbox","event","key","userNameText","commentoptions"],"mappings":"wGAAA,MAAOA,CAAAA,OAAP,KAAoB,+BAApB,CACA,MAAOC,CAAAA,YAAP,KAAyB,0BAAzB,C,wFAEA,QAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA4B,CAExB,cAAuCC,QAAQ,CAAC,EAAD,CAA/C,wCAAOC,YAAP,eAAqBC,cAArB,eAEA,eAA4BF,QAAQ,CAAC,EAAD,CAApC,yCAAOG,MAAP,eAAeC,SAAf,eAEA,QAASC,CAAAA,UAAT,CAAoBC,IAApB,CAA0B,CACtBJ,cAAc,CAACI,IAAI,CAACC,MAAL,CAAYC,KAAb,CAAd,CACH,CACD,QAASC,CAAAA,WAAT,EAAuB,CACnB,GAAMC,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAE,MADW,CAEnBC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAFU,CAGnBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEC,OAAO,CAAEf,YAAX,CAAyBE,MAAM,CAAEA,MAAjC,CAAf,CAHa,CAAvB,CAKAc,KAAK,CAAC,SAAWlB,KAAK,CAACmB,QAAjB,CAA4B,GAA5B,CAAkCnB,KAAK,CAACoB,IAAxC,CAA+C,EAAhD,CAAoDT,cAApD,CAAL,CAAyEU,IAAzE,CAA8E,SAAAC,OAAO,QACjFA,CAAAA,OAAO,CAACC,IAAR,GAAeF,IAAf,CAAoB,SAAAG,IAAI,CAAI,CAExB,GAAIA,IAAI,CAACJ,IAAL,EAAa,EAAjB,CAAqB,CACjBK,gBAAgB,CAAC,CAAC,yBAAD,cAA4B,UAAG,IAAI,CAAC,SAAR,sBAA5B,CAAD,CAAhB,CACAC,gBAAgB,GACnB,CAHD,IAGO,CACHC,QAAQ,CAAC,QAAD,CAAR,CACH,CACJ,CARD,CADiF,EAArF,EAYH,CAED,mBACI,aAAK,SAAS,CAAE9B,OAAO,CAAC+B,WAAxB,wBACI,YAAK,SAAS,CAAE/B,OAAO,CAACgC,WAAxB,kCADJ,cAII,mCACI,iBAAU,IAAI,CAAC,MAAf,CACI,KAAK,CAAE,CAAEC,MAAM,CAAE,MAAV,CADX,CAEI,SAAS,CAAEjC,OAAO,CAACkC,UAFvB,CAGI,QAAQ,CAAEzB,UAHd,CAII,UAAU,CAAE,oBAAA0B,KAAK,CAAI,CACjB,GAAIA,KAAK,CAACC,GAAN,EAAa,OAAb,EAAwBC,YAAY,GAAK,EAA7C,CAAiD,CAC7CxB,WAAW,GACd,CACJ,CARL,EADJ,EAJJ,cAkBI,aAAK,SAAS,CAAEb,OAAO,CAACsC,cAAxB,CAAwC,IAAI,CAAC,QAA7C,CAAsD,QAAQ,CAAE9B,SAAhE,wBACI,oCAAgBL,KAAK,CAACmB,QAAtB,GADJ,cAEI,0CAFJ,cAGI,gBAAQ,IAAI,CAAC,QAAb,wBACI,eAAQ,KAAK,CAAC,GAAd,eADJ,cAEI,eAAQ,KAAK,CAAC,GAAd,eAFJ,cAGI,eAAQ,KAAK,CAAC,GAAd,eAHJ,cAII,eAAQ,KAAK,CAAC,GAAd,eAJJ,cAKI,eAAQ,KAAK,CAAC,GAAd,eALJ,GAHJ,cAUI,KAAC,YAAD,IAVJ,GAlBJ,GADJ,CAiCH,CAED,cAAepB,CAAAA,WAAf","sourcesContent":["import classes from \"../css/CommentForm.module.css\"\nimport SumbitButton from \"../../ui/js/SumbitButton\";\n\nfunction CommentForm(props) {\n\n    const [comment_text, setCommentText] = useState(\"\");\n\n    const [rating, setRating] = useState(\"\");\n\n    function setComment(text) {\n        setCommentText(text.target.value);\n    }\n    function postComment() {\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ comment: comment_text, rating: rating })\n        };\n        fetch(\"/post/\" + props.movie_id + \"/\" + props.user + \"\", requestOptions).then(reponse =>\n            reponse.json().then(data => {\n\n                if (data.user == \"\") {\n                    setDialogMessage([\"User not found. Please \", <a href=\"/signup\">Sign Up!</a>])\n                    showCloseHandler();\n                } else {\n                    navigate(\"/movie\");\n                }\n            }\n            )\n        )\n    }\n\n    return (\n        <div className={classes.commentform}>\n            <div className={classes.commentlogo}>\n                Create a New Comment\n            </div>\n            <form>\n                <textarea type=\"text\"\n                    style={{ resize: 'none' }}\n                    className={classes.commentbox}\n                    onChange={setComment}\n                    onKeyPress={event => {\n                        if (event.key == 'Enter' && userNameText !== \"\") {\n                            postComment();\n                        }\n                    }\n                    }\n                />\n\n            </form>\n            <div className={classes.commentoptions} type=\"submit\" onChange={setRating}>\n                <div>Movie ID: {props.movie_id}</div>\n                <div>Rating (out of 5)</div>\n                <select name=\"rating\" >\n                    <option value=\"1\">1</option>\n                    <option value=\"2\">2</option>\n                    <option value=\"3\">3</option>\n                    <option value=\"4\">4</option>\n                    <option value=\"5\">5</option>\n                </select>\n                <SumbitButton />\n            </div>\n        </div>\n    );\n}\n\nexport default CommentForm"]},"metadata":{},"sourceType":"module"}